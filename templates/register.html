{% extends "base.html" %}
{% block content %}

<div class="content">
    <h1 class="auth-title">Registrieren</h1>

    {% if message %}
        <p style="color: #3cff9a; margin-bottom: 10px;"><strong>{{ message }}</strong></p>
    {% endif %}

    <form method="post" style="display:flex; flex-direction:column; align-items:center;">

        <input type="text" name="name" placeholder="Name Vorname" required>

        <!-- Birthdate row (centered & same width as inputs) -->
        <div
            style="
                width:280px;
                display:flex;
                align-items:center;
                justify-content:space-between;
                margin-bottom:14px;
            "
        >
            <input
                type="text"
                name="birth_day"
                id="birth_day"
                placeholder="Day"
                inputmode="numeric"
                maxlength="2"
                style="
                    width:72px;
                    padding:12px;
                    border-radius:999px;
                    border:none;
                    background-color:#e5e5e5;
                    font-size:15px;
                    text-align:center;
                "
            >

            <span style="opacity:.7;">-</span>

            <input
                type="text"
                name="birth_month"
                id="birth_month"
                placeholder="Month"
                inputmode="numeric"
                maxlength="2"
                style="
                    width:72px;
                    padding:12px;
                    border-radius:999px;
                    border:none;
                    background-color:#e5e5e5;
                    font-size:15px;
                    text-align:center;
                "
            >

            <span style="opacity:.7;">-</span>

            <input
                type="text"
                name="birth_year"
                id="birth_year"
                placeholder="Year"
                inputmode="numeric"
                maxlength="4"
                style="
                    width:96px;
                    padding:12px;
                    border-radius:999px;
                    border:none;
                    background-color:#e5e5e5;
                    font-size:15px;
                    text-align:center;
                "
            >
        </div>

        <select name="gender" id="gender-select">
            <option value="">Geschlecht wählen</option>
            <option value="m">Männlich</option>
            <option value="w">Weiblich</option>
        </select>

        <input type="email" name="email" placeholder="E-Mail Adresse" required>
        <input type="password" name="password" placeholder="Passwort" required>
        <input type="text" name="teamname" placeholder="Teamname">

        <button class="btn" type="submit">Konto erstellen</button>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const gender = document.getElementById('gender-select');
    if (gender) {
        function updateColor() {
            gender.classList.toggle('has-value', !!gender.value);
        }
        gender.addEventListener('change', updateColor);
        updateColor();
    }

    const day = document.getElementById('birth_day');
    const month = document.getElementById('birth_month');
    const year = document.getElementById('birth_year');

    function digitsOnly(el, maxLen) {
        el.addEventListener('input', () => {
            el.value = el.value.replace(/\D/g, '').slice(0, maxLen);
        });
    }

    function clamp2(el, min, max) {
        el.addEventListener('blur', () => {
            if (!el.value) return;
            let n = parseInt(el.value, 10);
            if (isNaN(n)) { el.value = ''; return; }
            n = Math.max(min, Math.min(max, n));
            el.value = String(n).padStart(2, '0');
        });
    }

    digitsOnly(day, 2);
    digitsOnly(month, 2);
    digitsOnly(year, 4);

    clamp2(day, 1, 31);
    clamp2(month, 1, 12);
});
</script>

{% endblock %}
